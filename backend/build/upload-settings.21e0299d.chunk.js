"use strict";(self.webpackChunklab_nckh=self.webpackChunklab_nckh||[]).push([[5689],{85078:($,h,e)=>{e.r(h),e.d(h,{SettingsPage:()=>v,default:()=>H});var t=e(67294),b=e(64593),D=e(86896),l=e(79946),C=e(8675),y=e(57713),M=e(79371),S=e(19442),T=e(26789),z=e(45349),g=e(75878),B=e(50781),P=e(77270),I=e(9370),m=e(61585),u=e(58885),L=e(42569),k=e(18446),A=e.n(k),i=e(57197);const N=a=>a;var x=e(18172),R=e(36968),U=e.n(R);const G={isLoading:!0,isSubmiting:!1,initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}},F=(a,o)=>(0,x.ZP)(a,n=>{switch(o.type){case"CANCEL_CHANGES":{n.modifiedData=a.initialData;break}case"GET_DATA_SUCCEEDED":{n.isLoading=!1,n.initialData=o.data,n.modifiedData=o.data;break}case"ON_CHANGE":{U()(n,["modifiedData",...o.keys.split(".")],o.value);break}case"ON_SUBMIT":{n.isSubmiting=!0;break}case"SUBMIT_SUCCEEDED":{n.initialData=a.modifiedData,n.isSubmiting=!1;break}case"ON_SUBMIT_ERROR":{n.isSubmiting=!1;break}default:return a}});var Z=e(16838);const v=()=>{const{formatMessage:a}=(0,D.Z)(),{lockApp:o,unlockApp:n}=(0,l.useOverlayBlocker)(),W=(0,l.useNotification)(),{get:X,put:j}=(0,l.useFetchClient)();(0,l.useFocusWhenNavigate)();const[{initialData:J,isLoading:K,isSubmiting:Q,modifiedData:d},c]=(0,t.useReducer)(F,G,N),E=(0,t.useRef)(!0);(0,t.useEffect)(()=>{const r=L.Z.CancelToken.source(),Y=async()=>{try{const{data:{data:p}}=await X((0,i.IF)("settings"),{cancelToken:r.token});c({type:"GET_DATA_SUCCEEDED",data:p})}catch(p){console.error(p)}};return E.current&&Y(),()=>{r.cancel("Operation canceled by the user."),E.current=!1}},[]);const O=A()(J,d),V=async s=>{if(s.preventDefault(),!O){o(),c({type:"ON_SUBMIT"});try{await j((0,i.IF)("settings"),d),c({type:"SUBMIT_SUCCEEDED"}),W({type:"success",message:{id:"notification.form.success.fields"}})}catch(r){console.error(r),c({type:"ON_SUBMIT_ERROR"})}n()}},f=({target:{name:s,value:r}})=>{c({type:"ON_CHANGE",keys:s,value:r})};return t.createElement(y.o,{tabIndex:-1},t.createElement(b.q,{title:a({id:(0,i.OB)("page.title"),defaultMessage:"Settings - Media Libray"})}),t.createElement("form",{onSubmit:V},t.createElement(M.T,{title:a({id:(0,i.OB)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:t.createElement(S.z,{disabled:O,"data-testid":"save-button",loading:Q,type:"submit",startIcon:t.createElement(C.Z,null),size:"S"},a({id:"global.save",defaultMessage:"Save"})),subtitle:a({id:(0,i.OB)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),t.createElement(T.D,null,K?t.createElement(l.LoadingIndicatorPage,null):t.createElement(z.A,null,t.createElement(g.k,{direction:"column",alignItems:"stretch",gap:12},t.createElement(B.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(g.k,{direction:"column",alignItems:"stretch",gap:4},t.createElement(g.k,null,t.createElement(P.Z,{variant:"delta",as:"h2"},a({id:(0,i.OB)("settings.blockTitle"),defaultMessage:"Asset management"}))),t.createElement(I.r,{gap:6},t.createElement(m.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"responsiveDimensions","data-testid":"responsiveDimensions",checked:d.responsiveDimensions,hint:a({id:(0,i.OB)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:a({id:(0,i.OB)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{f({target:{name:"responsiveDimensions",value:s.target.checked}})}})),t.createElement(m.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"sizeOptimization","data-testid":"sizeOptimization",checked:d.sizeOptimization,hint:a({id:(0,i.OB)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:a({id:(0,i.OB)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{f({target:{name:"sizeOptimization",value:s.target.checked}})}})),t.createElement(m.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"autoOrientation","data-testid":"autoOrientation",checked:d.autoOrientation,hint:a({id:(0,i.OB)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:a({id:(0,i.OB)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{f({target:{name:"autoOrientation",value:s.target.checked}})}}))))))))))},H=()=>t.createElement(l.CheckPagePermissions,{permissions:Z.Z.settings},t.createElement(v,null))}}]);
