"use strict";(self.webpackChunklab_nckh=self.webpackChunklab_nckh||[]).push([[302],{40316:(j,r,e)=>{e.r(r),e.d(r,{SingleSignOn:()=>f,default:()=>B});var t=e(67294),n=e(79946),R=e(8675),E=e(45349),p=e(57713),C=e(79371),M=e(19442),L=e(26789),O=e(75878),P=e(77270),y=e(9370),g=e(61585),I=e(58885),b=e(50614),D=e(473),T=e(86896),A=e(18446),F=e.n(A),Z=e(19631),u=e(48474),c=e(87751),i=e(87561);const x=i.Ry().shape({autoRegister:i.Xg().required(n.translatedErrors.required),defaultRole:i.nK().when("autoRegister",(a,o)=>a?o.required(n.translatedErrors.required):o.nullable())}),m={...c.Z.settings.sso,readRoles:c.Z.settings.roles.read},f=()=>{const{formatMessage:a}=(0,T.Z)(),{isLoading:o,allowedActions:{canUpdate:h,canReadRoles:G}}=(0,n.useRBAC)(m),[{formErrors:l,initialData:H,isLoading:z,modifiedData:d,showHeaderButtonLoader:W},V,{handleChange:S,handleSubmit:K}]=(0,u.G4)((0,Z.IF)("providers/options"),x,()=>{},["autoRegister","defaultRole"]),{roles:N}=(0,u.bF)(G);(0,n.useFocusWhenNavigate)();const U=o||z;(0,t.useEffect)(()=>{if(l.defaultRole){const s='[name="defaultRole"]';document.querySelector(s).focus()}},[l]);const v=F()(H,d);return t.createElement(E.A,null,t.createElement(n.SettingsPageTitle,{name:"SSO"}),t.createElement(p.o,{tabIndex:-1},t.createElement("form",{onSubmit:s=>{if(v){s.preventDefault();return}K(s)}},t.createElement(C.T,{primaryAction:t.createElement(M.z,{"data-testid":"save-button",disabled:v,loading:W,startIcon:t.createElement(R.Z,null),type:"submit",size:"L"},a({id:"global.save",defaultMessage:"Save"})),title:a({id:"Settings.sso.title",defaultMessage:"Single Sign-On"}),subtitle:a({id:"Settings.sso.description",defaultMessage:"Configure the settings for the Single Sign-On feature."})}),t.createElement(L.D,null,U?t.createElement(n.LoadingIndicatorPage,null):t.createElement(O.k,{direction:"column",alignItems:"stretch",gap:4,background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(P.Z,{variant:"delta",as:"h2"},a({id:"global.settings",defaultMessage:"Settings"})),t.createElement(y.r,{gap:4},t.createElement(g.P,{col:6,m:6,s:12},t.createElement(I.s,{"aria-label":"autoRegister","data-testid":"autoRegister",disabled:!h,checked:d.autoRegister,hint:a({id:"Settings.sso.form.registration.description",defaultMessage:"Create new user on SSO login if no account exists"}),label:a({id:"Settings.sso.form.registration.label",defaultMessage:"Auto-registration"}),name:"autoRegister",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{S({target:{name:"autoRegister",value:s.target.checked}})}})),t.createElement(g.P,{col:6,m:6,s:12},t.createElement(b.P,{disabled:!h,hint:a({id:"Settings.sso.form.defaultRole.description",defaultMessage:"It will attach the new authenticated user to the selected role"}),error:l.defaultRole?a({id:l.defaultRole.id,defaultMessage:l.defaultRole.id}):"",label:a({id:"Settings.sso.form.defaultRole.label",defaultMessage:"Default role"}),name:"defaultRole",onChange:s=>{S({target:{name:"defaultRole",value:s}})},placeholder:a({id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}),value:d.defaultRole},N.map(({id:s,name:X})=>t.createElement(D.W,{key:s,value:s.toString()},X))))))))))},B=()=>t.createElement(n.CheckPagePermissions,{permissions:m.main},t.createElement(f,null))}}]);
