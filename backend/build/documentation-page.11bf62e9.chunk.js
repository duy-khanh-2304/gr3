"use strict";(self.webpackChunklab_nckh=self.webpackChunklab_nckh||[]).push([[9789],{75730:(M,i,t)=>{t.r(i),t.d(i,{default:()=>V});var e=t(67294),d=t(86896),s=t(79946),m=t(64593),p=t(45349),P=t(26789),y=t(50781),E=t(57713),O=t(79371),L=t(19442),Z=t(51541),B=t(42403),C=t(6090),u=t(62351),g=t(77270),v=t(94487),f=t(75878),h=t(37527),D=t(2953),$=t(61378),n=t(34263),r=t(80826),c=t(93742);const U=o=>{const l=(()=>o.startsWith("/")?`${window.strapi.backendURL}${o}`:o.startsWith("http")?o:`${window.strapi.backendURL}/${o}`)();return window.open(l,"_blank"),window.focus()};var K=t(90306);const V=()=>{(0,s.useFocusWhenNavigate)();const{formatMessage:o}=(0,d.Z)(),{data:l,isLoading:W,isError:N,deleteMutation:Q,regenerateDocMutation:F}=(0,K.Z)(),[T,R]=(0,e.useState)(!1),[H,I]=(0,e.useState)(!1),[X,j]=(0,e.useState)(),z=4,G=(l?.docVersions?.length||0)+1,S=a=>{const A=l?.prefix.startsWith("/")?"":"/";U(`${A}${l?.prefix}/v${a}`)},J=a=>{F.mutate({version:a,prefix:l?.prefix})},Y=()=>{R(!T)},w=async()=>{I(!0),await Q.mutateAsync({prefix:l?.prefix,version:X}),R(!T),I(!1)},b=a=>{j(a),R(!T)},x=o({id:(0,c.O)("plugin.name"),defaultMessage:"Documentation"});return N?e.createElement(p.A,null,e.createElement(P.D,null,e.createElement(y.x,{paddingTop:8},e.createElement(s.AnErrorOccurred,null)))):e.createElement(p.A,null,e.createElement(m.q,{title:x}),e.createElement(E.o,{"aria-busy":W},e.createElement(O.T,{title:x,subtitle:o({id:(0,c.O)("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(s.CheckPermissions,{permissions:r.Z.open},e.createElement(L.z,{onClick:()=>S(l?.currentVersion),startIcon:e.createElement(D.Z,null)},o({id:(0,c.O)("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})))}),e.createElement(P.D,null,W&&e.createElement(s.LoadingIndicatorPage,null,"Plugin is loading"),l?.docVersions.length?e.createElement(Z.i,{colCount:z,rowCount:G},e.createElement(B.h,null,e.createElement(C.Tr,null,e.createElement(u.Th,null,e.createElement(g.Z,{variant:"sigma",textColor:"neutral600"},o({id:(0,c.O)("pages.PluginPage.table.version"),defaultMessage:"Version"}))),e.createElement(u.Th,null,e.createElement(g.Z,{variant:"sigma",textColor:"neutral600"},o({id:(0,c.O)("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"}))))),e.createElement(v.p,null,l.docVersions.sort((a,A)=>a.generatedDate<A.generatedDate?1:-1).map(a=>e.createElement(C.Tr,{key:a.version},e.createElement(u.Td,{width:"50%"},e.createElement(g.Z,null,a.version)),e.createElement(u.Td,{width:"50%"},e.createElement(g.Z,null,a.generatedDate)),e.createElement(u.Td,null,e.createElement(f.k,{justifyContent:"end",...s.stopPropagation},e.createElement(h.h,{onClick:()=>S(a.version),noBorder:!0,icon:e.createElement(D.Z,null),label:o({id:(0,c.O)("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${a.version}`})}),e.createElement(s.CheckPermissions,{permissions:r.Z.regenerate},e.createElement(h.h,{onClick:()=>J(a.version),noBorder:!0,icon:e.createElement($.Z,null),label:o({id:(0,c.O)("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${a.version}`})})),e.createElement(s.CheckPermissions,{permissions:r.Z.update},a.version!==l.currentVersion&&e.createElement(h.h,{onClick:()=>b(a.version),noBorder:!0,icon:e.createElement(n.Z,null),label:o({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${a.version}`})})))))))):e.createElement(s.EmptyStateLayout,null)),e.createElement(s.ConfirmDialog,{isConfirmButtonLoading:H,onConfirm:w,onToggleDialog:Y,isOpen:T})))}},90306:(M,i,t)=>{t.d(i,{Z:()=>P});var e=t(88767),d=t(79946),s=t(49950),m=t(798);const P=()=>{const y=(0,e.useQueryClient)(),E=(0,d.useNotification)(),{isLoading:O,isError:L,data:Z}=(0,e.useQuery)(["get-documentation",s.Z],async()=>{try{const{data:n}=await g(`/${s.Z}/getInfos`);return n}catch{return E({type:"warning",message:{id:"notification.error"}}),null}}),{del:B,post:C,put:u,get:g}=(0,d.useFetchClient)(),v=n=>{E({type:"warning",message:n.response.payload.message})},f=(n,r)=>{y.invalidateQueries("get-documentation"),E({type:n,message:{id:(0,m.Z)(r)}})},h=(0,e.useMutation)(({prefix:n,version:r})=>B(`${n}/deleteDoc/${r}`),{onSuccess:()=>f("info","notification.delete.success"),onError:n=>v(n)}),D=(0,e.useMutation)(({prefix:n,body:r})=>u(`${n}/updateSettings`,r),{onSuccess:()=>f("success","notification.update.success"),onError:v}),$=(0,e.useMutation)(({prefix:n,version:r})=>C(`${n}/regenerateDoc`,{version:r}),{onSuccess:()=>f("info","notification.generate.success"),onError:n=>v(n)});return{data:Z,isLoading:O,isError:L,deleteMutation:h,submitMutation:D,regenerateDocMutation:$}}},798:(M,i,t)=>{t.d(i,{Z:()=>s});var e=t(49950);const s=m=>`${e.Z}.${m}`},93742:(M,i,t)=>{t.d(i,{O:()=>e.Z});var e=t(798)}}]);
