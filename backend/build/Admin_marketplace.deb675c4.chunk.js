"use strict";(self.webpackChunklab_nckh=self.webpackChunklab_nckh||[]).push([[5516],{9226:(se,x,n)=>{n.d(x,{Z:()=>I});var e=n(67294);const I=(l,C)=>{const[T,D]=(0,e.useState)(l);return(0,e.useEffect)(()=>{const Z=setTimeout(()=>{D(l)},C);return()=>{clearTimeout(Z)}},[l,C]),T}},39667:(se,x,n)=>{n.r(x),n.d(x,{MarketPlacePage:()=>Me,default:()=>vt});var e=n(67294),E=n(86896),I=n(64593),l=n(79946),C=n(45349),T=n(57713),D=n(26789),Z=n(20107),h=n(75878),O=n(61738),f=n(50781),F=n(96073),B=n(54375),z=n(45697),t=n.n(z),$=n(79371),U=n(80994),K=n(76838);const A=({isOnline:a,npmPackageType:s})=>{const{formatMessage:r}=(0,E.Z)(),{trackUsage:o}=(0,l.useTracking)(),i=s==="provider"?"didSubmitProvider":"didSubmitPlugin";return e.createElement($.T,{title:r({id:"global.marketplace",defaultMessage:"Marketplace"}),subtitle:r({id:"admin.pages.MarketPlacePage.subtitle",defaultMessage:"Get more out of Strapi"}),primaryAction:a&&e.createElement(U.Q,{startIcon:e.createElement(K.Z,null),variant:"tertiary",href:`https://market.strapi.io/submit-${s}`,onClick:()=>o(i),isExternal:!0},r({id:`admin.pages.MarketPlacePage.submit.${s}.link`,defaultMessage:`Submit ${s}`}))})},j=A;A.defaultProps={npmPackageType:"plugin"},A.propTypes={isOnline:t().bool.isRequired,npmPackageType:t().string};var V=n(87751);const Re=()=>{const a=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,[s,r]=(0,e.useState)(a),o=()=>r(!0),i=()=>r(!1);return(0,e.useEffect)(()=>(window.addEventListener("online",o),window.addEventListener("offline",i),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",i)}),[]),s};var Ce=n(80631),re=n(91393),S=n(80907);const Te=()=>{const{formatMessage:a}=(0,E.Z)(),{trackUsage:s}=(0,l.useTracking)();return e.createElement("a",{href:"https://strapi.canny.io/plugin-requests",target:"_blank",rel:"noopener noreferrer nofollow",style:{textDecoration:"none"},onClick:()=>s("didMissMarketplacePlugin")},e.createElement(l.ContentBox,{title:a({id:"admin.pages.MarketPlacePage.missingPlugin.title",defaultMessage:"Documentation"}),subtitle:a({id:"admin.pages.MarketPlacePage.missingPlugin.description",defaultMessage:"Tell us what plugin you are looking for and we'll let our community plugin developers know in case they are in search for inspiration!"}),icon:e.createElement(Ce.Z,null),iconBackground:"alternative100",endAction:e.createElement(S.J,{as:re.Z,color:"neutral600",width:3,height:3,marginLeft:2})}))};var Se=n(28809),xe=n(9370),De=n(61585),L=n(1565),Oe=n(23450),Be=n.n(Oe),k=n(77270),J=n(74273),Le=n(60324),Ne=n(61473),Ie=n(8675),Ze=n(36625),ie=n.n(Ze),Y=n(19442),oe=n(70780);const w=({description:a,installMessage:s,disabled:r,handleCopy:o,pluginName:i})=>e.createElement(J.u,{"data-testid":`tooltip-${i}`,description:a},e.createElement(f.x,null,e.createElement(Y.z,{size:"S",startIcon:e.createElement(oe.Z,null),variant:"secondary",disabled:r,onClick:o},s))),X=({strapiPeerDepVersion:a,strapiAppVersion:s,handleCopy:r,pluginName:o})=>{const{formatMessage:i}=(0,E.Z)(),g=ie().validRange(a),c=ie().satisfies(s,g),d=i({id:"admin.pages.MarketPlacePage.plugin.copy",defaultMessage:"Copy install command"});if(s){if(!g)return e.createElement(w,{installMessage:d,pluginName:o,description:i({id:"admin.pages.MarketPlacePage.plugin.version.null",defaultMessage:'Unable to verify compatibility with your Strapi version: "{strapiAppVersion}"'},{strapiAppVersion:s}),handleCopy:r});if(!c)return e.createElement(w,{installMessage:d,pluginName:o,description:i({id:"admin.pages.MarketPlacePage.plugin.version",defaultMessage:'Update your Strapi version: "{strapiAppVersion}" to: "{versionRange}"'},{strapiAppVersion:s,versionRange:g}),disabled:!0})}return e.createElement(Y.z,{size:"S",startIcon:e.createElement(oe.Z,null),variant:"secondary",onClick:r},d)};w.defaultProps={disabled:!1,handleCopy:null},w.propTypes={description:t().string.isRequired,installMessage:t().string.isRequired,disabled:t().bool,handleCopy:t().func,pluginName:t().string.isRequired},X.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},X.propTypes={strapiAppVersion:t().string,strapiPeerDepVersion:t().string,handleCopy:t().func.isRequired,pluginName:t().string.isRequired};const $e=X,q=({isInstalled:a,isInDevelopmentMode:s,commandToCopy:r,strapiAppVersion:o,strapiPeerDepVersion:i,pluginName:g})=>{const c=(0,l.useNotification)(),{formatMessage:d}=(0,E.Z)(),{trackUsage:p}=(0,l.useTracking)(),m=()=>{navigator.clipboard.writeText(r),p("willInstallPlugin"),c({type:"success",message:{id:"admin.pages.MarketPlacePage.plugin.copy.success"}})};return a?e.createElement(f.x,{paddingLeft:4},e.createElement(S.J,{as:Ie.Z,marginRight:2,width:12,height:12,color:"success600"}),e.createElement(k.Z,{variant:"omega",textColor:"success600",fontWeight:"bold"},d({id:"admin.pages.MarketPlacePage.plugin.installed",defaultMessage:"Installed"}))):s?e.createElement($e,{strapiAppVersion:o,strapiPeerDepVersion:i,handleCopy:m,pluginName:g}):null};q.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},q.propTypes={isInstalled:t().bool.isRequired,isInDevelopmentMode:t().bool.isRequired,commandToCopy:t().string.isRequired,strapiAppVersion:t().string,strapiPeerDepVersion:t().string,pluginName:t().string.isRequired};const Ae=q;var je=n(81984),Fe=n(86820),ze=n(71125),Ue=n(52794);const Ve=(0,L.default)(je.i)`
  width: ${(0,l.pxToRem)(12)};
  transform: rotate(90deg);
`,_=({githubStars:a,npmDownloads:s,npmPackageType:r})=>{const{formatMessage:o}=(0,E.Z)();return e.createElement(h.k,{gap:1},!!a&&e.createElement(e.Fragment,null,e.createElement(S.J,{as:Fe.Z,height:(0,l.pxToRem)(12),width:(0,l.pxToRem)(12),"aria-hidden":!0}),e.createElement(S.J,{as:ze.Z,height:(0,l.pxToRem)(12),width:(0,l.pxToRem)(12),color:"warning500","aria-hidden":!0}),e.createElement("p",{"aria-label":o({id:`admin.pages.MarketPlacePage.${r}.githubStars`,defaultMessage:"This {package} was starred {starsCount} on GitHub"},{starsCount:a,package:r})},e.createElement(k.Z,{variant:"pi",textColor:"neutral800",lineHeight:16},a)),e.createElement(Ve,{unsetMargin:!1,background:"neutral200"})),e.createElement(S.J,{as:Ue.Z,height:(0,l.pxToRem)(12),width:(0,l.pxToRem)(12),"aria-hidden":!0}),e.createElement("p",{"aria-label":o({id:`admin.pages.MarketPlacePage.${r}.downloads`,defaultMessage:"This {package} has {downloadsCount} weekly downloads"},{downloadsCount:s,package:r})},e.createElement(k.Z,{variant:"pi",textColor:"neutral800",lineHeight:16},s)))};_.defaultProps={githubStars:0,npmDownloads:0},_.propTypes={githubStars:t().number,npmDownloads:t().number,npmPackageType:t().string.isRequired};const we=_,We=(0,L.default)(k.Z)`
  /* stylelint-disable value-no-vendor-prefix, property-no-vendor-prefix */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  /* stylelint-enable value-no-vendor-prefix, property-no-vendor-prefix */
  overflow: hidden;
`,ee=({npmPackage:a,isInstalled:s,useYarn:r,isInDevelopmentMode:o,npmPackageType:i,strapiAppVersion:g})=>{const{attributes:c}=a,{formatMessage:d}=(0,E.Z)(),{trackUsage:p}=(0,l.useTracking)(),m=r?`yarn add ${c.npmPackageName}`:`npm install ${c.npmPackageName}`,P=d({id:"admin.pages.MarketPlacePage.plugin.tooltip.madeByStrapi",defaultMessage:"Made by Strapi"}),M=`https://market.strapi.io/${Be().plural(i)}/${c.slug}`;return e.createElement(h.k,{direction:"column",justifyContent:"space-between",paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",height:"100%",alignItems:"normal","data-testid":"npm-package-card"},e.createElement(f.x,null,e.createElement(h.k,{direction:"row",justifyContent:"space-between",alignItems:"flex-start"},e.createElement(f.x,{as:"img",src:c.logo.url,alt:`${c.name} logo`,hasRadius:!0,width:11,height:11}),e.createElement(we,{githubStars:c.githubStars,npmDownloads:c.npmDownloads,npmPackageType:i})),e.createElement(f.x,{paddingTop:4},e.createElement(k.Z,{as:"h3",variant:"delta"},e.createElement(h.k,{alignItems:"center"},c.name,c.validated&&!c.madeByStrapi&&e.createElement(J.u,{description:d({id:"admin.pages.MarketPlacePage.plugin.tooltip.verified",defaultMessage:"Plugin verified by Strapi"})},e.createElement(h.k,null,e.createElement(S.J,{as:Le.Z,marginLeft:2,color:"success600"}))),c.madeByStrapi&&e.createElement(J.u,{description:P},e.createElement(h.k,null,e.createElement(f.x,{as:"img",src:Ne,alt:P,marginLeft:1,width:6,height:"auto"})))))),e.createElement(f.x,{paddingTop:2},e.createElement(We,{as:"p",variant:"omega",textColor:"neutral600"},c.description))),e.createElement(h.k,{gap:2,style:{alignSelf:"flex-end"},paddingTop:6},e.createElement(U.Q,{size:"S",href:M,isExternal:!0,endIcon:e.createElement(re.Z,null),"aria-label":d({id:"admin.pages.MarketPlacePage.plugin.info.label",defaultMessage:"Learn more about {pluginName}"},{pluginName:c.name}),variant:"tertiary",onClick:()=>p("didPluginLearnMore")},d({id:"admin.pages.MarketPlacePage.plugin.info.text",defaultMessage:"More"})),e.createElement(Ae,{isInstalled:s,isInDevelopmentMode:o,commandToCopy:m,strapiAppVersion:g,strapiPeerDepVersion:c.strapiVersion,pluginName:c.name})))};ee.defaultProps={isInDevelopmentMode:!1,strapiAppVersion:null},ee.propTypes={npmPackage:t().shape({id:t().string.isRequired,attributes:t().shape({name:t().string.isRequired,description:t().string.isRequired,slug:t().string.isRequired,npmPackageName:t().string.isRequired,npmPackageUrl:t().string.isRequired,repositoryUrl:t().string.isRequired,logo:t().object.isRequired,developerName:t().string.isRequired,validated:t().bool.isRequired,madeByStrapi:t().bool.isRequired,strapiCompatibility:t().oneOf(["v3","v4"]),strapiVersion:t().string,githubStars:t().number,npmDownloads:t().number}).isRequired}).isRequired,isInstalled:t().bool.isRequired,useYarn:t().bool.isRequired,isInDevelopmentMode:t().bool,npmPackageType:t().string.isRequired,strapiAppVersion:t().string};const Ge=ee;var He=n(58252),Qe=n(62372);const Ke=(0,L.default)(f.x)`
  background: ${({theme:a})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${a.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Je=()=>e.createElement(Qe.M,null,Array(12).fill(null).map((a,s)=>e.createElement(Ke,{key:`empty-plugin-card-${s}`,height:"234px",hasRadius:!0}))),le=({content:a})=>e.createElement(f.x,{position:"relative","data-testid":"marketplace-results"},e.createElement(Je,null),e.createElement(f.x,{position:"absolute",top:11,width:"100%"},e.createElement(h.k,{alignItems:"center",justifyContent:"center",direction:"column"},e.createElement(S.J,{as:He.Z,color:"",width:"160px",height:"88px"}),e.createElement(f.x,{paddingTop:6},e.createElement(k.Z,{variant:"delta",as:"p",textColor:"neutral600"},a)))));le.propTypes={content:t().string.isRequired};const Ye=le,te=({status:a,npmPackages:s,installedPackageNames:r,useYarn:o,isInDevelopmentMode:i,npmPackageType:g,strapiAppVersion:c,debouncedSearch:d})=>{const{formatMessage:p}=(0,E.Z)();if(a==="error")return e.createElement(h.k,{paddingTop:8},e.createElement(l.AnErrorOccurred,null));if(a==="loading")return e.createElement(h.k,{justifyContent:"center",paddingTop:8},e.createElement(Se.a,null,"Loading content..."));const m=p({id:"admin.pages.MarketPlacePage.search.empty",defaultMessage:'No result for "{target}"'},{target:d});return s.length===0?e.createElement(Ye,{content:m}):e.createElement(xe.r,{gap:4,"data-testid":"marketplace-results"},s.map(P=>e.createElement(De.P,{col:4,s:6,xs:12,style:{height:"100%"},key:P.id},e.createElement(Ge,{npmPackage:P,isInstalled:r.includes(P.attributes.npmPackageName),useYarn:o,isInDevelopmentMode:i,npmPackageType:g,strapiAppVersion:c}))))};te.defaultProps={npmPackages:[],installedPackageNames:[],strapiAppVersion:null,debouncedSearch:""},te.propTypes={status:t().string.isRequired,npmPackages:t().array,installedPackageNames:t().arrayOf(t().string),useYarn:t().bool.isRequired,isInDevelopmentMode:t().bool.isRequired,npmPackageType:t().string.isRequired,strapiAppVersion:t().string,debouncedSearch:t().string};const ce=te;var de=n(50614),ge=n(473);const Xe=(0,L.default)(f.x)`
  font-weight: ${({theme:a})=>a.fontWeights.semiBold};

  span {
    font-size: ${({theme:a})=>a.fontSizes[1]};
  }

  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,ue=({sortQuery:a,handleSelectChange:s})=>{const{formatMessage:r}=(0,E.Z)(),o={"name:asc":{selected:{id:"admin.pages.MarketPlacePage.sort.alphabetical.selected",defaultMessage:"Sort by alphabetical order"},option:{id:"admin.pages.MarketPlacePage.sort.alphabetical",defaultMessage:"Alphabetical order"}},"submissionDate:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.newest.selected",defaultMessage:"Sort by newest"},option:{id:"admin.pages.MarketPlacePage.sort.newest",defaultMessage:"Newest"}},"githubStars:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.githubStars.selected",defaultMessage:"Sort by GitHub stars"},option:{id:"admin.pages.MarketPlacePage.sort.githubStars",defaultMessage:"Number of GitHub stars"}},"npmDownloads:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.npmDownloads.selected",defaultMessage:"Sort by npm downloads"},option:{id:"admin.pages.MarketPlacePage.sort.npmDownloads",defaultMessage:"Number of downloads"}}};return e.createElement(Xe,null,e.createElement(de.P,{size:"S",id:"sort-by-select",value:a,customizeContent:()=>r(o[a].selected),onChange:i=>{s({sort:i})},label:r({id:"admin.pages.MarketPlacePage.sort.label",defaultMessage:"Sort by"})},Object.entries(o).map(([i,g])=>e.createElement(ge.W,{key:i,value:i},r(g.option)))))};ue.propTypes={sortQuery:t().string.isRequired,handleSelectChange:t().func.isRequired};const qe=ue;var _e=n(14020),et=n(15800),tt=n(36002),at=n(3206);const pe=({message:a,value:s,onChange:r,possibleFilters:o,onClear:i,customizeContent:g})=>{const c=(d,p)=>`${d} (${p})`;return e.createElement(de.P,{"data-testid":`${a}-button`,label:a,placeholder:a,size:"M",onChange:r,onClear:i,value:s,customizeContent:g,multi:!0},Object.entries(o).map(([d,p])=>e.createElement(ge.W,{"data-testid":`${d}-${p}`,key:d,value:d},c(d,p))))};pe.propTypes={message:t().string.isRequired,value:t().array.isRequired,onChange:t().func.isRequired,possibleFilters:t().object.isRequired,onClear:t().func.isRequired,customizeContent:t().func.isRequired};const me=pe,fe=({source:a,onToggle:s,query:r,npmPackageType:o,possibleCategories:i,possibleCollections:g,handleSelectChange:c,handleSelectClear:d})=>{const{formatMessage:p}=(0,E.Z)();return e.createElement(at.J2,{source:a,onDismiss:s,padding:3,spacing:4},e.createElement(st,{direction:"column",alignItems:"stretch",gap:1},e.createElement(me,{message:p({id:"admin.pages.MarketPlacePage.filters.collections",defaultMessage:"Collections"}),value:r?.collections||[],onChange:m=>{c({collections:m})},onClear:()=>d("collections"),possibleFilters:g,customizeContent:m=>p({id:"admin.pages.MarketPlacePage.filters.collectionsSelected",defaultMessage:"{count, plural, =0 {No collections} one {# collection} other {# collections}} selected"},{count:m.length})}),o==="plugin"&&e.createElement(me,{message:p({id:"admin.pages.MarketPlacePage.filters.categories",defaultMessage:"Categories"}),value:r?.categories||[],onChange:m=>{c({categories:m})},onClear:()=>d("categories"),possibleFilters:i,customizeContent:m=>p({id:"admin.pages.MarketPlacePage.filters.categoriesSelected",defaultMessage:"{count, plural, =0 {No categories} one {# category} other {# categories}} selected"},{count:m.length}),name:"categories"})))};fe.propTypes={onToggle:t().func.isRequired,source:t().shape({current:t().instanceOf(Element)}).isRequired,query:t().object.isRequired,npmPackageType:t().oneOf(["plugin","provider"]).isRequired,possibleCollections:t().object.isRequired,possibleCategories:t().object.isRequired,handleSelectChange:t().func.isRequired,handleSelectClear:t().func.isRequired};const nt=fe,st=(0,L.default)(h.k)`
  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,ae=({name:a,handleRemove:s})=>e.createElement(f.x,{padding:1},e.createElement(_e.V,{icon:e.createElement(et.Z,null),onClick:s},a)),rt=(0,L.default)(Y.z)`
  height: ${({theme:a})=>a.sizes.input.S};
`,Pe=({possibleCollections:a,possibleCategories:s,npmPackageType:r,query:o,handleSelectClear:i,handleSelectChange:g})=>{const[c,d]=(0,e.useState)(!1),p=(0,e.useRef)(),{formatMessage:m}=(0,E.Z)(),P=()=>d(u=>!u),M=(u,v)=>{const b={[v]:o[v].filter(N=>N!==u)};g(b)};return e.createElement(e.Fragment,null,e.createElement(f.x,{paddingTop:1,paddingBottom:1},e.createElement(rt,{variant:"tertiary",ref:p,"data-testid":"filters-button",startIcon:e.createElement(tt.Z,null),onClick:P,size:"S"},m({id:"app.utils.filters",defaultMessage:"Filters"})),c&&e.createElement(nt,{onToggle:P,source:p,query:o,handleSelectClear:i,handleSelectChange:g,possibleCollections:a,possibleCategories:s,npmPackageType:r})),o.collections?.map(u=>e.createElement(ae,{name:u,key:u,handleRemove:()=>M(u,"collections")})),r==="plugin"&&o.categories?.map(u=>e.createElement(ae,{name:u,key:u,handleRemove:()=>M(u,"categories")})))};ae.propTypes={name:t().string.isRequired,handleRemove:t().func.isRequired},Pe.propTypes={npmPackageType:t().oneOf(["plugin","provider"]).isRequired,possibleCollections:t().object.isRequired,possibleCategories:t().object.isRequired,query:t().object.isRequired,handleSelectChange:t().func.isRequired,handleSelectClear:t().func.isRequired};const it=Pe,he=({pagination:a})=>e.createElement(f.x,{paddingTop:4},e.createElement(h.k,{alignItems:"flex-end",justifyContent:"space-between"},e.createElement(l.PageSizeURLQuery,{options:["12","24","50","100"],defaultValue:"24"}),e.createElement(l.PaginationURLQuery,{pagination:a})));he.propTypes={pagination:t().shape({page:t().number.isRequired,pageCount:t().number.isRequired,pageSize:t().number.isRequired,total:t().number.isRequired}).isRequired};const ot=he;var lt=n(9226);const ct=n.p+"9d5d788027e86620c234.svg",dt=()=>{const{formatMessage:a}=(0,E.Z)();return e.createElement(C.A,null,e.createElement(T.o,null,e.createElement(j,{isOnline:!1}),e.createElement(h.k,{width:"100%",direction:"column",alignItems:"center",justifyContent:"center",paddingTop:(0,l.pxToRem)(120)},e.createElement(f.x,{paddingBottom:2},e.createElement(k.Z,{textColor:"neutral700",variant:"alpha"},a({id:"admin.pages.MarketPlacePage.offline.title",defaultMessage:"You are offline"}))),e.createElement(f.x,{paddingBottom:6},e.createElement(k.Z,{textColor:"neutral700",variant:"epsilon"},a({id:"admin.pages.MarketPlacePage.offline.subtitle",defaultMessage:"You need to be connected to the Internet to access Strapi Market."}))),e.createElement("img",{src:ct,alt:"offline",style:{width:"88px",height:"88px"}}))))};var gt=n(46683),Ee=n(88767),ut=n(80129),W=n.n(ut);const ve="https://market-api.strapi.io",pt=async(a={})=>{try{const s=W().stringify(W().parse(a)),r=await fetch(`${ve}/plugins?${s}`);if(!r.ok)throw new Error("Failed to fetch marketplace plugins.");return await r.json()}catch(s){console.error(s)}return null},mt=(a,s)=>{const r=(0,l.useNotification)();return(0,Ee.useQuery)(["list-marketplace-plugins",s],()=>pt(s),{onSuccess(){a&&a()},onError(){r({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})},ft=async(a={})=>{try{const s=W().stringify(W().parse(a)),r=await fetch(`${ve}/providers?${s}`);if(!r.ok)throw new Error("Failed to fetch marketplace providers.");return await r.json()}catch(s){console.error(s)}return null},Pt=(a,s)=>{const r=(0,l.useNotification)();return(0,Ee.useQuery)(["list-marketplace-providers",s],()=>ft(s),{onSuccess(){a&&a()},onError(){r({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};function ht({npmPackageType:a,debouncedSearch:s,query:r,tabQuery:o}){const{notifyStatus:i}=(0,gt.G)(),{formatMessage:g}=(0,E.Z)(),c=g({id:"global.marketplace",defaultMessage:"Marketplace"}),d=()=>{i(g({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:c}))},p={page:r?.page||1,pageSize:r?.pageSize||24},{data:m,status:P}=mt(d,{...o.plugin,pagination:p,search:s}),{data:M,status:u}=Pt(d,{...o.provider,pagination:p,search:s}),v=a==="plugin"?m:M,b=a==="plugin"?P:u,[N,G]=(0,e.useState)({}),[H,Q]=(0,e.useState)({});(0,e.useEffect)(()=>{b==="success"&&G(v.meta.collections),P==="success"&&Q(m.meta.categories)},[m?.meta.categories,P,v?.meta.collections,b]);const{pagination:ne}=b==="success"?v.meta:{};return{pluginsResponse:m,providersResponse:M,pluginsStatus:P,providersStatus:u,possibleCollections:N,possibleCategories:H,pagination:ne}}const Et=ht,Me=()=>{const{formatMessage:a}=(0,E.Z)(),{trackUsage:s}=(0,l.useTracking)(),r=(0,e.useRef)(s),o=(0,l.useNotification)(),[{query:i},g]=(0,l.useQueryParams)(),c=(0,lt.Z)(i?.search,500)||"",{autoReload:d,dependencies:p,useYarn:m,strapiVersion:P}=(0,l.useAppInfo)(),M=Re(),u=i?.npmPackageType||"plugin",[v,b]=(0,e.useState)({plugin:u==="plugin"?{...i}:{},provider:u==="provider"?{...i}:{}});(0,l.useFocusWhenNavigate)(),(0,e.useEffect)(()=>{r.current("didGoToMarketplace")},[]),(0,e.useEffect)(()=>{d||o({type:"info",message:{id:"admin.pages.MarketPlacePage.production",defaultMessage:"Manage plugins from the development environment"},blockTransition:!0})},[o,d]);const{pluginsResponse:N,providersResponse:G,pluginsStatus:H,providersStatus:Q,possibleCollections:ne,possibleCategories:Mt,pagination:ye}=Et({npmPackageType:u,debouncedSearch:c,query:i,tabQuery:v});if(!M)return e.createElement(dt,null);const yt=R=>{const y=R===0?"plugin":"provider",bt=v[y]&&Object.keys(v[y]).length;g(bt?{...v[y],search:i?.search||"",npmPackageType:y,page:1}:{npmPackageType:y,collections:[],categories:[],sort:"name:asc",page:1,search:i?.search||""})},ke=R=>{g({...R,page:1}),b(y=>({...y,[u]:{...y[u],...R}}))},kt=R=>{g({[R]:[],page:null},"remove"),b(y=>({...y,[u]:{}}))},be=Object.keys(p);return e.createElement(C.A,null,e.createElement(T.o,null,e.createElement(I.q,{title:a({id:"admin.pages.MarketPlacePage.helmet",defaultMessage:"Marketplace - Plugins"})}),e.createElement(j,{isOnline:M,npmPackageType:u}),e.createElement(D.D,null,e.createElement(Z.v,{label:a({id:"admin.pages.MarketPlacePage.tab-group.label",defaultMessage:"Plugins and Providers for Strapi"}),id:"tabs",variant:"simple",initialSelectedTabIndex:["plugin","provider"].indexOf(u),onTabChange:yt},e.createElement(h.k,{justifyContent:"space-between",paddingBottom:4},e.createElement(O.m,null,e.createElement(O.O,null,a({id:"admin.pages.MarketPlacePage.plugins",defaultMessage:"Plugins"})," ",H==="success"?`(${N.meta.pagination.total})`:"..."),e.createElement(O.O,null,a({id:"admin.pages.MarketPlacePage.providers",defaultMessage:"Providers"})," ",Q==="success"?`(${G.meta.pagination.total})`:"...")),e.createElement(f.x,{width:"25%"},e.createElement(F.w,{name:"searchbar",onClear:()=>g({search:"",page:1}),value:i?.search,onChange:R=>g({search:R.target.value,page:1}),clearLabel:a({id:"admin.pages.MarketPlacePage.search.clear",defaultMessage:"Clear the search"}),placeholder:a({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})},a({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})))),e.createElement(h.k,{paddingBottom:4,gap:2},e.createElement(qe,{sortQuery:i?.sort||"name:asc",handleSelectChange:ke}),e.createElement(it,{npmPackageType:u,possibleCollections:ne,possibleCategories:Mt,query:i||{},handleSelectChange:ke,handleSelectClear:kt})),e.createElement(B.n,null,e.createElement(B.x,null,e.createElement(ce,{npmPackages:N?.data,status:H,installedPackageNames:be,useYarn:m,isInDevelopmentMode:d,npmPackageType:"plugin",strapiAppVersion:P,debouncedSearch:c})),e.createElement(B.x,null,e.createElement(ce,{npmPackages:G?.data,status:Q,installedPackageNames:be,useYarn:m,isInDevelopmentMode:d,npmPackageType:"provider",debouncedSearch:c})))),ye&&e.createElement(ot,{pagination:ye}),e.createElement(f.x,{paddingTop:8},e.createElement(Te,null)))))},vt=()=>e.createElement(l.CheckPagePermissions,{permissions:V.Z.marketplace.main},e.createElement(Me,null))},80994:(se,x,n)=>{n.d(x,{Q:()=>O});var e=n(85893),E=n(67294),I=n(1565),l=n(92577),C=n(21817),T=n(63507),D=n(11047),Z=n(75515);const h=(0,I.default)(C.G)`
  text-decoration: none;

  &[aria-disabled='true'] {
    ${l.sg}
    &:active {
      ${l.sg}
    }
  }

  &:hover {
    ${l.yP}
  }

  &:active {
    ${l.tB}
  }

  ${l.PD}
`,O=E.forwardRef(({variant:f="default",startIcon:F,endIcon:B,disabled:z=!1,children:t,size:$="S",as:U=T.f,...K},A)=>{const j=$==="S"?2:"10px",V=4;return(0,e.jsxs)(h,{ref:A,"aria-disabled":z,size:$,variant:f,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:j,paddingLeft:V,paddingRight:V,paddingTop:j,pointerEvents:z?"none":void 0,...K,as:U||T.f,children:[F&&(0,e.jsx)(D.k,{"aria-hidden":!0,children:F}),(0,e.jsx)(Z.Z,{variant:$==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:t}),B&&(0,e.jsx)(D.k,{"aria-hidden":!0,children:B})]})});O.displayName="LinkButton"}}]);
