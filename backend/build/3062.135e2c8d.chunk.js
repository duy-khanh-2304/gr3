"use strict";(self.webpackChunklab_nckh=self.webpackChunklab_nckh||[]).push([[3062],{63062:(Ne,G,a)=>{a.r(G),a.d(G,{default:()=>ze});var e=a(67294),V=a(16550),M=a(79946),ce=a(274),I=a.n(ce),w=a(41580),A=a(86896),r=a(76835);const ie=async()=>{try{return await(0,M.request)(`/${I()}/component`,{method:"GET"})}catch{return null}},de=async()=>{try{return await(0,M.request)(`/${I()}/content-types`,{method:"GET"})}catch{return null}},ue=async()=>{try{return(await(0,M.request)(`/${I()}/component`,{method:"POST"},!0)).json()}catch{return null}};var H=a(11047),d=a(85893),ge=a(73727),D=a(1565),Z=a(92577),me=a(21817),c=a(75515);const he=(0,D.default)(me.G)`
  &[aria-disabled='true'] {
    ${Z.sg}
    &:active {
      ${Z.sg}
    }
  }
  &:hover {
    ${Z.yP}
  }
  &:active {
    ${Z.tB}
  }
  ${Z.PD}
`,j=e.forwardRef(({variant:t="default",startIcon:n,endIcon:l,disabled:i=!1,children:E,size:v="S",href:u,to:h,...y},p)=>{const O=u?"_blank":void 0,C=u?"noreferrer noopener":void 0,T=v==="S"?2:"10px",k=4;return(0,d.jsxs)(he,{ref:p,"aria-disabled":i,size:v,variant:t,target:O,rel:C,to:i?void 0:h,href:i?"#":u,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:T,paddingLeft:k,paddingRight:k,paddingTop:T,pointerEvents:i?"none":void 0,...y,as:h&&!i?ge.NavLink:"a",children:[n&&(0,d.jsx)(H.k,{"aria-hidden":!0,children:n}),(0,d.jsx)(c.Z,{variant:v==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:E}),l&&(0,d.jsx)(H.k,{"aria-hidden":!0,children:l})]})});var Y=a(89722);const fe=t=>{const n=t.querySelector('[tabindex="0"]');n&&n.focus()};var Ee=a(52954),P=a(7801);const pe=({colCount:t,rowCount:n,jumpStep:l=3,initialCol:i=0,initialRow:E=0,...v})=>{const u=(0,e.useRef)(null),h=(0,e.useRef)(!1),[y,p]=(0,e.useState)(E),[O,C]=(0,e.useState)(i),T=(0,e.useCallback)(({colIndex:g,rowIndex:s})=>{C(g),p(s)},[]);(0,e.useEffect)(()=>{h.current&&fe(u.current),h.current||(h.current=!0)},[O,y]);const k=g=>{switch(g.key){case P.y.RIGHT:{g.preventDefault(),C(s=>s<t-1?s+1:s);break}case P.y.LEFT:{g.preventDefault(),C(s=>s>0?s-1:s);break}case P.y.UP:{g.preventDefault(),p(s=>s>0?s-1:s);break}case P.y.DOWN:{g.preventDefault(),p(s=>s<n-1?s+1:s);break}case P.y.HOME:{g.preventDefault(),g.ctrlKey&&p(0),C(0);break}case P.y.END:{g.preventDefault(),g.ctrlKey&&p(n-1),C(t-1);break}case P.y.PAGE_DOWN:{g.preventDefault(),p(s=>s+l<n?s+l:n-1);break}case P.y.PAGE_UP:{g.preventDefault(),p(s=>s-l>0?s-l:0);break}}},$=(0,e.useMemo)(()=>({rowIndex:y,colIndex:O,setTableValues:T}),[O,y,T]);return(0,d.jsx)(Ee.N.Provider,{value:$,children:(0,d.jsx)("table",{role:"grid",ref:u,"aria-rowcount":n,"aria-colcount":t,onKeyDown:k,...v})})},ve=(0,D.default)(w.x)`
  overflow: hidden;
  border: 1px solid ${({theme:t})=>t.colors.neutral150};
`,Se=(0,D.default)(pe)`
  width: 100%;
  white-space: nowrap;
`,ye=(0,D.default)(w.x)`
  &:before {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(90deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({overflowing:t})=>t==="both"||t==="left"?"''":void 0};
    box-shadow: ${({theme:t})=>t.shadows.tableShadow};
    width: ${({theme:t})=>t.spaces[2]};
    left: 0;
  }

  &:after {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(270deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({overflowing:t})=>t==="both"||t==="right"?"''":void 0};
    box-shadow: ${({theme:t})=>t.shadows.tableShadow};
    width: ${({theme:t})=>t.spaces[2]};
    right: 0;
    top: 0;
  }
`,be=(0,D.default)(w.x)`
  overflow-x: auto;
`,J=({footer:t,...n})=>{const l=(0,e.useRef)(null),[i,E]=(0,e.useState)(),v=u=>{const h=u.target.scrollWidth-u.target.clientWidth;if(u.target.scrollLeft===0){E("right");return}if(u.target.scrollLeft===h){E("left");return}u.target.scrollLeft>0&&E("both")};return(0,e.useEffect)(()=>{l.current.scrollWidth>l.current.clientWidth&&E("right")},[]),(0,d.jsxs)(ve,{shadow:"tableShadow",hasRadius:!0,background:"neutral0",children:[(0,d.jsx)(ye,{overflowing:i,position:"relative",children:(0,d.jsx)(be,{ref:l,onScroll:v,paddingLeft:6,paddingRight:6,children:(0,d.jsx)(Se,{...n})})}),t]})},xe=({children:t,...n})=>{const l=e.Children.toArray(t).map(i=>(0,e.isValidElement)(i)?(0,e.cloneElement)(i,{"aria-rowindex":1}):i);return(0,d.jsx)("thead",{...n,children:l})},Oe=(0,D.default)(xe)`
  border-bottom: 1px solid ${({theme:t})=>t.colors.neutral150};
`,Q=({children:t,...n})=>(0,d.jsx)(Oe,{...n,children:t});var B=a(47144),R=a(18374),X=a(550),L=a(96315),q=a(94228),S=a(50781),b=a(76687),x=a(3566),K=a(29728),Ce=a(62372),Me=a(60881),we=a(18189),Pe=a(48683),Te=a(45124);const ke=t=>(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...t,children:(0,d.jsx)("path",{fill:"#212134",d:"M6.17 18a3 3 0 0 1 5.66 0H22v2H11.83a3 3 0 0 1-5.66 0H2v-2h4.17Zm6-7a3 3 0 0 1 5.66 0H22v2h-4.17a3 3 0 0 1-5.66 0H2v-2h10.17Zm-6-7a3.001 3.001 0 0 1 5.66 0H22v2H11.83a3 3 0 0 1-5.66 0H2V4h4.17Z"})}),De=ke,Re=t=>(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 32",...t,children:[(0,d.jsx)("path",{fill:"#4945FF",d:"M0 4a4 4 0 0 1 4-4h24a4 4 0 0 1 4 4v24a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4Z"}),(0,d.jsx)("path",{fill:"#fff",d:"M15.733 8c.343 0 .678.108.963.31.285.202.507.49.639.826.13.337.165.707.098 1.064a1.879 1.879 0 0 1-.474.942 1.705 1.705 0 0 1-.887.504 1.64 1.64 0 0 1-1.002-.105 1.76 1.76 0 0 1-.778-.678A1.924 1.924 0 0 1 14 9.841a1.9 1.9 0 0 1 .508-1.302c.325-.345.766-.539 1.225-.539ZM20 24h-8v-2.265h2.933v-6.23H12.8v-2.266h4.267v8.495H20V24Z"})]}),_=Re,ee=a(25309).Z,te=({item:t})=>{const[n,l]=(0,e.useState)(!0),[i,E]=(0,e.useState)(!0),[v,u]=(0,e.useState)(!0),[h,y]=(0,e.useState)(!0),[p,O]=(0,e.useState)(!0),[C,T]=(0,e.useState)(!0),[k,$]=(0,e.useState)(!0),[g,s]=(0,e.useState)(!0),[ne,le]=(0,e.useState)(!0),[oe,re]=(0,e.useState)(!0),[N,se]=(0,e.useState)(null),[Ke,z]=(0,e.useState)(!1),{formatMessage:m}=(0,A.Z)();(0,e.useEffect)(()=>{(async()=>{const f=await ee.get();se(f)})()},[]);const We=o=>{const f=N[t?.uid];l(f?.seoChecks?.metaTitle),E(f?.seoChecks?.metaDescription),u(f?.seoChecks?.metaRobots),y(f?.seoChecks?.metaSocial),O(f?.seoChecks?.wordCount),T(f?.seoChecks?.canonicalUrl),$(f?.seoChecks?.keywordDensity),s(f?.seoChecks?.structuredData),le(f?.seoChecks?.alternativeText),re(f?.seoChecks?.lastUpdatedAt),z(U=>!U)},Fe=o=>{const f={...N,[t?.uid]:{collectionName:N[t?.uid]?.collectionName,seoChecks:{metaTitle:n,metaDescription:i,metaRobots:v,metaSocial:h,wordCount:p,canonicalUrl:C,keywordDensity:k,structuredData:g,alternativeText:ne,lastUpdatedAt:oe}}};ee.set(f).then(async()=>{se(f),z(U=>!U)})};return e.createElement(e.Fragment,null,e.createElement(K.z,{variant:"tertiary",startIcon:e.createElement(De,null),onClick:o=>We(o)},m({id:(0,r.O)("SEOPage.info.config"),defaultMessage:"Settings"})),Ke&&e.createElement(Me.P,{onClose:()=>z(o=>!o),labelledBy:"title"},e.createElement(we.x,null,e.createElement(c.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},m({id:(0,r.O)("SEOPage.info.settings"),defaultMessage:"Settings"}))),e.createElement(Pe.f,null,e.createElement(S.x,{paddingBottom:8,paddingTop:4},e.createElement(M.ContentBox,{title:m({id:"Information",defaultMessage:"Information"}),subtitle:m({id:(0,r.O)("HomePage.info.settings.information"),defaultMessage:"Disable SEO checks for this specific content-type."}),icon:e.createElement(_,null),iconBackground:"primary100"})),e.createElement(Ce.M,null,e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:n,onChange:()=>l(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.meta-title-check"),defaultMessage:"Meta Title"})))),e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:i,onChange:()=>E(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.meta-description-check"),defaultMessage:"Meta Description"})))),e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:v,onChange:()=>u(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.meta-robots-check"),defaultMessage:"Meta Robots"})))),e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:h,onChange:()=>y(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.meta-social-check"),defaultMessage:"Meta Social"})))),e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:p,onChange:()=>O(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.word-count-check"),defaultMessage:"Word Count"})))),e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:C,onChange:()=>T(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.canonical-url-check"),defaultMessage:"Canonical URL"})))),e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:k,onChange:()=>$(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.keyword-density-check"),defaultMessage:"Keyword Density"})))),e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:g,onChange:()=>s(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.structured-data-check"),defaultMessage:"Structured Data"})))),e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:ne,onChange:()=>le(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.alternative-text-check"),defaultMessage:"Alt Text"})))),e.createElement(S.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(b.K,{horizontal:!0,spacing:4,padding:3},e.createElement(x.r,{label:"Switch",selected:oe,onChange:()=>re(o=>!o)}),e.createElement(c.Z,{variant:"delta"},m({id:(0,r.O)("SEOPage.info.settings.last-updated-at-check"),defaultMessage:"Last Updated At"})))))),e.createElement(Te.m,{startActions:e.createElement(K.z,{onClick:()=>z(o=>!o),variant:"tertiary"},m({id:(0,r.O)("SEOPage.info.settings.cancel.button"),defaultMessage:"Cancel"})),endActions:e.createElement(e.Fragment,null,e.createElement(K.z,{onClick:o=>Fe(o)},m({id:(0,r.O)("SEOPage.info.settings.save.button"),defaultMessage:"Save"})))})))};var Ze=a(82777),W=a(77296),F=a(42761),Ie=a(96486),ae=a.n(Ie);const Ae=({contentTypes:t})=>{const{formatMessage:n}=(0,A.Z)();return e.createElement(e.Fragment,null,e.createElement(w.x,{padding:8},e.createElement(Ze.v,{label:"label",id:"tabs",variant:"simple"},e.createElement(W.m,null,e.createElement(W.O,null,e.createElement(c.Z,null,n({id:(0,r.O)("SEOPage.tab.collection-type-title"),defaultMessage:"Collection Types"}))),e.createElement(W.O,null,e.createElement(c.Z,{variant:"omega"},n({id:(0,r.O)("SEOPage.tab.single-type-title"),defaultMessage:"Single Types"})))),e.createElement(F.n,null,e.createElement(F.x,null,e.createElement(J,{colCount:2,rowCount:t.collectionTypes.length},e.createElement(Q,null,e.createElement(B.Tr,null,e.createElement(R.Th,null,e.createElement(c.Z,{variant:"sigma"},n({id:(0,r.O)("SEOPage.tab-panel.column-name"),defaultMessage:"Name"}))))),e.createElement(X.p,null,t&&t.collectionTypes&&!ae().isEmpty(t.collectionTypes)?t.collectionTypes.map(l=>e.createElement(B.Tr,{key:l.uid},e.createElement(R.Td,null,e.createElement(c.Z,{textColor:"neutral800"},l.globalId)),e.createElement(R.Td,null,e.createElement(H.k,{justifyContent:"right",alignItems:"right"},l.seo?e.createElement(te,{item:l}):e.createElement(j,{startIcon:e.createElement(L.default,null),variant:"secondary",to:`/plugins/content-type-builder/content-types/${l.uid}`},n({id:(0,r.O)("SEOPage.info.add"),defaultMessage:"Add component"})))))):e.createElement(w.x,{padding:8,background:"neutral0"},e.createElement(Y.x,{icon:e.createElement(q.w,null),content:n({id:(0,r.O)("SEOPage.info.no-collection-types"),defaultMessage:"You don't have any collection-types yet..."}),action:e.createElement(j,{to:"/plugins/content-type-builder",variant:"secondary",startIcon:e.createElement(L.default,null)},n({id:(0,r.O)("SEOPage.info.create-collection-type"),defaultMessage:"Create your first collection-type"}))}))))),e.createElement(F.x,null,e.createElement(J,{colCount:2,rowCount:t.singleTypes.length},e.createElement(Q,null,e.createElement(B.Tr,null,e.createElement(R.Th,null,e.createElement(c.Z,{variant:"sigma"},n({id:(0,r.O)("SEOPage.tab-panel.column-name"),defaultMessage:"Name"}))))),e.createElement(X.p,null,t&&t.singleTypes&&!ae().isEmpty(t.singleTypes)?t.singleTypes.map(l=>e.createElement(B.Tr,{key:l.uid},e.createElement(R.Td,null,e.createElement(c.Z,{textColor:"neutral800"},l.globalId)),e.createElement(R.Td,null,e.createElement(H.k,{justifyContent:"right",alignItems:"right"},l.seo?e.createElement(te,{item:l}):e.createElement(j,{startIcon:e.createElement(L.default,null),variant:"secondary",to:`/plugins/content-type-builder/content-types/${l.uid}`},n({id:(0,r.O)("SEOPage.info.add"),defaultMessage:"Add component"})))))):e.createElement(w.x,{padding:8,background:"neutral0"},e.createElement(Y.x,{icon:e.createElement(q.w,null),content:n({id:(0,r.O)("SEOPage.info.no-single-types"),defaultMessage:"You don't have any single-types yet..."}),action:e.createElement(j,{to:"/plugins/content-type-builder",variant:"secondary",startIcon:e.createElement(L.default,null)},n({id:(0,r.O)("SEOPage.info.create-single-type"),defaultMessage:"Create your first single-type"}))})))))))))};var He=a(53979);const je=t=>{const{formatMessage:n}=(0,A.Z)();return e.createElement(w.x,{background:"neutral100"},e.createElement(He.A,{secondaryAction:t?null:e.createElement(LinkButton,{variant:"tertiary",to:"/plugins/content-type-builder/component-categories/shared/shared.seo",startIcon:e.createElement(Pencil,null)},n({id:(0,r.O)("SEOPage.header.button.edit-component"),defaultMessage:"Edit SEO component"})),title:n({id:(0,r.O)("SEOPage.header.title"),defaultMessage:"SEO"}),subtitle:n({id:(0,r.O)("SEOPage.header.subtitle"),defaultMessage:"Optimize your content to be SEO friendly"}),as:"h2"}))},Be=()=>{const{formatMessage:t}=(0,A.Z)(),{lockAppWithAutoreload:n,unlockAppWithAutoreload:l}=(0,M.useAutoReloadOverlayBlocker)(),[i,E]=(0,e.useState)(!0),[v,u]=(0,e.useState)(!1),h=(0,e.useRef)({}),y=(0,e.useRef)({});return(0,e.useEffect)(()=>{(async()=>{if(h.current=await ie(),y.current=await de(),!h.current)try{n(),await ue()}catch(O){console.log(O)}finally{l(),u(!0)}})().then(()=>{E(!1)})},[v]),i?e.createElement(M.LoadingIndicatorPage,null):e.createElement(e.Fragment,null,e.createElement(je,{seoComponent:h.current}),e.createElement(w.x,{paddingLeft:8,paddingRight:8},e.createElement(M.ContentBox,{title:t({id:"Information",defaultMessage:"Information"}),subtitle:t({id:(0,r.O)("HomePage.info.information"),defaultMessage:"When adding your SEO component, make sure to name it 'seo' and to include it in the root of your Content-Type."}),icon:e.createElement(_,null),iconBackground:"primary100"})),e.createElement(Ae,{contentTypes:y.current}))},Le=(0,e.memo)(Be);var $e=a(53487);const ze=()=>e.createElement(M.CheckPagePermissions,{permissions:$e.Z.main},e.createElement("div",null,e.createElement(V.rs,null,e.createElement(V.AW,{path:`/plugins/${I()}`,component:Le,exact:!0}))))}}]);
