"use strict";(self.webpackChunklab_nckh=self.webpackChunklab_nckh||[]).push([[8503],{31346:(P,u,t)=>{t.r(u),t.d(u,{default:()=>K});var e=t(67294),d=t(86896),s=t(41054),l=t(69307),f=t(57713),v=t(79371),M=t(19442),g=t(26789),E=t(50781),x=t(75878),R=t(78549),A=t(9370),O=t(61585),y=t(65184),n=t(28469),r=t(8675),i=t(2953),o=t(71578),c=t(80826),p=t(93742),a=t(90306),m=t(1565),L=t(24780);const U=(0,m.ZP)(L.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:h})=>h.colors.neutral600};
    }
  }
`;var B=t(87561);const b=B.Ry().shape({restrictedAccess:B.O7(),password:B.Z_().when("restrictedAccess",(h,D)=>h?D.required(l.I0.required):D)}),K=()=>{(0,l.go)();const{formatMessage:h}=(0,d.Z)(),{submitMutation:D,data:I,isLoading:w}=(0,a.Z)(),[C,$]=(0,e.useState)(!1),F=S=>{D.mutate({prefix:I?.prefix,body:S})};return e.createElement(f.o,null,w?e.createElement(l.dO,null,"Plugin settings are loading"):e.createElement(s.J9,{initialValues:{restrictedAccess:I?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:F,validationSchema:b},({handleSubmit:S,values:T,handleChange:H,errors:Z,setFieldTouched:z,setFieldValue:W})=>e.createElement(l.l0,{noValidate:!0,onSubmit:S},e.createElement(v.T,{title:h({id:(0,p.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:h({id:(0,p.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(l.jW,{permissions:c.Z.update},e.createElement(M.z,{type:"submit",startIcon:e.createElement(r.Z,null)},h({id:(0,p.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})))}),e.createElement(g.D,null,e.createElement(E.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(x.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(R.Z,{variant:"delta",as:"h2"},h({id:"global.settings",defaultMessage:"Settings"})),e.createElement(A.r,{gap:4},e.createElement(O.P,{col:6,s:12},e.createElement(y.s,{name:"restrictedAccess",label:h({id:(0,p.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:h({id:(0,p.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:T.restrictedAccess,onChange:()=>{T.restrictedAccess===!0&&(W("password","",!1),z("password",!1,!1)),W("restrictedAccess",!T.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),T.restrictedAccess&&e.createElement(O.P,{col:6,s:12},e.createElement(n.o,{label:h({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:C?"text":"password",value:T.password,onChange:H,error:Z.password?h({id:Z.password,defaultMessage:"Invalid value"}):null,endAction:e.createElement(U,{onClick:Q=>{Q.stopPropagation(),$(N=>!N)},label:h(C?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},C?e.createElement(i.Z,null):e.createElement(o.Z,null))})))))))))}},90306:(P,u,t)=>{t.d(u,{Z:()=>v});var e=t(88767),d=t(69307),s=t(49950),l=t(798);const v=()=>{const M=(0,e.useQueryClient)(),g=(0,d.lm)(),{isLoading:E,isError:x,data:R}=(0,e.useQuery)(["get-documentation",s.Z],async()=>{try{const{data:a}=await n(`/${s.Z}/getInfos`);return a}catch{return g({type:"warning",message:{id:"notification.error"}}),null}}),{del:A,post:O,put:y,get:n}=(0,d.kY)(),r=a=>{g({type:"warning",message:a.response.payload.message})},i=(a,m)=>{M.invalidateQueries("get-documentation"),g({type:a,message:{id:(0,l.Z)(m)}})},o=(0,e.useMutation)(({prefix:a,version:m})=>A(`${a}/deleteDoc/${m}`),{onSuccess:()=>i("info","notification.delete.success"),onError:a=>r(a)}),c=(0,e.useMutation)(({prefix:a,body:m})=>y(`${a}/updateSettings`,m),{onSuccess:()=>i("success","notification.update.success"),onError:r}),p=(0,e.useMutation)(({prefix:a,version:m})=>O(`${a}/regenerateDoc`,{version:m}),{onSuccess:()=>i("info","notification.generate.success"),onError:a=>r(a)});return{data:R,isLoading:E,isError:x,deleteMutation:o,submitMutation:c,regenerateDocMutation:p}}},798:(P,u,t)=>{t.d(u,{Z:()=>s});var e=t(49950);const s=l=>`${e.Z}.${l}`},93742:(P,u,t)=>{t.d(u,{O:()=>e.Z});var e=t(798)},26789:(P,u,t)=>{t.d(u,{D:()=>f});var e=t(85893),d=t(67294),s=t(45697),l=t(50781);const f=({children:v})=>(0,e.jsx)(l.x,{paddingLeft:10,paddingRight:10,children:v});f.propTypes={children:s.node.isRequired}},79371:(P,u,t)=>{t.d(u,{T:()=>A});var e=t(85893),d=t(67294),s=t(45697),l=t(1565);const f=n=>{const r=(0,d.useRef)(null),[i,o]=(0,d.useState)(!0),c=([p])=>{o(p.isIntersecting)};return(0,d.useEffect)(()=>{const p=r.current,a=new IntersectionObserver(c,n);return p&&a.observe(r.current),()=>{p&&a.disconnect()}},[r,n]),[r,i]};var v=t(79698);const M=(n,r)=>{const i=(0,v.W)(r);(0,d.useLayoutEffect)(()=>{const o=new ResizeObserver(i);return Array.isArray(n)?n.forEach(c=>{c.current&&o.observe(c.current)}):n.current&&o.observe(n.current),()=>{o.disconnect()}},[n,i])};var g=t(50781),E=t(75878),x=t(78549);const R=()=>{const n=(0,d.useRef)(null),[r,i]=(0,d.useState)(null),[o,c]=f({root:null,rootMargin:"0px",threshold:0});return M(o,()=>{o.current&&i(o.current.getBoundingClientRect())}),(0,d.useEffect)(()=>{n.current&&i(n.current.getBoundingClientRect())},[n]),{containerRef:o,isVisible:c,baseHeaderLayoutRef:n,headerSize:r}},A=n=>{const{containerRef:r,isVisible:i,baseHeaderLayoutRef:o,headerSize:c}=R();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:c?.height},ref:r,children:i&&(0,e.jsx)(y,{ref:o,...n})}),!i&&(0,e.jsx)(y,{...n,sticky:!0,width:c?.width})]})};A.displayName="HeaderLayout";const O=(0,l.ZP)(g.x)`
  width: ${n=>n.width}px;
  z-index: ${({theme:n})=>n.zIndices[1]};
`,y=d.forwardRef(({navigationAction:n,primaryAction:r,secondaryAction:i,subtitle:o,title:c,sticky:p,width:a,...m},L)=>{const j=typeof o=="string";return p?(0,e.jsx)(O,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:a,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(E.k,{justifyContent:"space-between",children:[(0,e.jsxs)(E.k,{children:[n&&(0,e.jsx)(g.x,{paddingRight:3,children:n}),(0,e.jsxs)(g.x,{children:[(0,e.jsx)(x.Z,{variant:"beta",as:"h1",...m,children:c}),j?(0,e.jsx)(x.Z,{variant:"pi",textColor:"neutral600",children:o}):o]}),i?(0,e.jsx)(g.x,{paddingLeft:4,children:i}):null]}),(0,e.jsx)(E.k,{children:r?(0,e.jsx)(g.x,{paddingLeft:2,children:r}):void 0})]})}):(0,e.jsxs)(g.x,{ref:L,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,e.jsx)(g.x,{paddingBottom:2,children:n}):null,(0,e.jsxs)(E.k,{justifyContent:"space-between",children:[(0,e.jsxs)(E.k,{minWidth:0,children:[(0,e.jsx)(x.Z,{as:"h1",variant:"alpha",...m,children:c}),i?(0,e.jsx)(g.x,{paddingLeft:4,children:i}):null]}),r]}),j?(0,e.jsx)(x.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:o}):o]})});y.displayName="BaseHeaderLayout",y.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},y.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,sticky:s.bool,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired,width:s.number},A.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},A.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired}},57713:(P,u,t)=>{t.d(u,{o:()=>f});var e=t(85893),d=t(1565),s=t(50781);const l=(0,d.ZP)(s.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,f=({labelledBy:v="main-content-title",...M})=>(0,e.jsx)(l,{"aria-labelledby":v,as:"main",id:"main-content",tabIndex:-1,...M})}}]);
