"use strict";(self.webpackChunklab_nckh=self.webpackChunklab_nckh||[]).push([[7027],{27887:(U,f,e)=>{e.d(f,{r:()=>h});var o=e(67294),l=e(45697),u=e.n(l),D=e(99168),T=e(50781);function E(d,g,r){if(!d||!g)return{display:"none"};const{x:m,y:M}=r;return{transform:`translate(${m}px, ${M}px)`}}function h({renderItem:d}){const{itemType:g,isDragging:r,item:m,initialOffset:M,currentOffset:k,mouseOffset:x}=(0,D.useDragLayer)(P=>({item:P.getItem(),itemType:P.getItemType(),initialOffset:P.getInitialSourceClientOffset(),currentOffset:P.getSourceClientOffset(),isDragging:P.isDragging(),mouseOffset:P.getClientOffset()}));return r?o.createElement(T.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},o.createElement(T.x,{style:E(M,k,x)},d({type:g,item:m}))):null}h.propTypes={renderItem:u().func.isRequired}},99781:(U,f,e)=>{var o=e(67294);const l=(0,o.createContext)();var u=null},75642:(U,f,e)=>{e.d(f,{PL:()=>T,Y9:()=>Te.Y,zE:()=>X,Ky:()=>a,fi:()=>O,zH:()=>fe,r5:()=>$});var o=e(67294),l=e(86706),u=e(21323);const T=()=>{const t=(0,l.v9)(u.Z),s=(0,o.useCallback)(n=>t?.components?.[n]??{},[t]);return{...t,getComponentLayout:s}};var E=e(52861),h=e(79946),d=e(50361),g=e.n(d),r=e(27361),m=e.n(r),M=e(36968),k=e.n(M),x=e(47815);const P=(t,s)=>s.find(n=>n.uid===t),J=(t,s)=>{const n=Q(t,s),c=z(n.contentType,s),v=q(n.contentType,n.components);return k()(n,["contentType","layouts","edit"],c),k()(n,["contentType","layouts","list"],v),Object.keys(n.components).forEach(y=>{const L=z(n.components[y],s);k()(n,["components",y,"layouts","edit"],L)}),n},Q=(t,s)=>{const n=(0,x.w8)(g()(t),s,"contentType"),{components:c,contentType:v}=n,y=L=>Object.keys(L.metadatas).reduce((W,I)=>{const B=m()(L,["attributes",I],{});let b=L.metadatas[I];if(B.type==="relation"){const me=P(B.targetModel,s),w=b.edit.mainField,V={name:w,schema:m()(me,["attributes",w])};b={list:{...b.list,mainField:V},edit:{...b.edit,mainField:V}}}return W[I]=b,W},{});return k()(n,["contentType","metadatas"],y(v)),Object.keys(c).forEach(L=>{const W=c[L],I=y(W);k()(n,["components",L,"metadatas"],I)}),n},z=(t,s)=>t.layouts.edit.reduce((n,c)=>{const v=c.map(y=>{const L=m()(t,["attributes",y.name],{}),W={...y,fieldSchema:L,metadatas:m()(t,["metadatas",y.name,"edit"],{})};if(L.type==="relation"){const B=P(L.targetModel,s).pluginOptions||{};k()(W,"targetModelPluginOptions",B),k()(W,"queryInfos",{shouldDisplayRelationLink:ae(t,y.name,s)})}return W});return n.push(v),n},[]),q=(t,s)=>t.layouts.list.reduce((c,v)=>{const y=m()(t,["attributes",v],{}),L=m()(t,["metadatas",v,"list"],{}),W=y.type;if(W==="relation")return c.push({key:`__${v}_key__`,name:v,fieldSchema:y,metadatas:L}),c;if(W==="component"){const I=s[y.component],B=I.settings.mainField,b=I.attributes[B];return c.push({key:`__${v}_key__`,name:v,fieldSchema:y,metadatas:{...L,mainField:{...b,name:B}}}),c}return c.push({key:`__${v}_key__`,name:v,fieldSchema:y,metadatas:L}),c},[]),ae=(t,s,n)=>{const c=m()(t,["attributes",s,"targetModel"],"");return ee(n).includes(c)},ee=t=>t.filter(s=>s.isDisplayed).map(({uid:s})=>s),_=J;var te=e(18172);const K={error:null,isLoading:!0,layout:{},layouts:{}},Y=(t,s)=>(0,te.ZP)(t,n=>{switch(s.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const c=s.data.contentType.uid;n.layout=s.data,n.layouts[c]=s.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=s.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=t.layouts[s.uid];break}case"UPDATE_LAYOUT":{const c=t.layout;n.layout={...c,contentType:{uid:c.contentType.uid,...s.newLayout.contentType}},n.layouts[c.contentType.uid]={...c,contentType:{uid:c.contentType.uid,...s.newLayout.contentType}};break}default:return n}});var j=e(84668);const X=t=>{const[{error:s,isLoading:n,layout:c,layouts:v},y]=(0,o.useReducer)(Y,K),L=(0,o.useMemo)(j.Vo,[]),{schemas:W}=(0,l.v9)(w=>L(w),l.wU),I=(0,o.useRef)(!0),{get:B}=(0,h.useFetchClient)(),b=(0,o.useCallback)(async(w,V)=>{if(v[w]){y({type:"SET_LAYOUT_FROM_STATE",uid:w});return}y({type:"GET_DATA"});try{const{data:{data:oe}}=await B(`/content-manager/content-types/${w}/configuration`,{cancelToken:V.token});y({type:"GET_DATA_SUCCEEDED",data:_(oe,W)})}catch(oe){if(E.Z.isCancel(oe))return;I.current&&console.error(oe),I.current&&y({type:"GET_DATA_ERROR",error:oe})}},[v,W,B]);(0,o.useEffect)(()=>()=>{I.current=!1},[]),(0,o.useEffect)(()=>{const V=E.Z.CancelToken.source();return b(t,V),()=>{V.cancel("Operation canceled by the user.")}},[t,b]);const me=(0,o.useCallback)(w=>{y({type:"UPDATE_LAYOUT",newLayout:_(w,W)})},[W]);return{error:s,isLoading:n,layout:c,updateLayout:me}},H=t=>t["content-manager_app"].collectionTypeLinks;var Z=e(80129),le=e(13218),ye=e.n(le);const ce=(t,s)=>Object.keys(t).reduce((n,c)=>{const v=t[c],y=m()(s,[c],v);return ye()(v)?{...n,[c]:ce(v,y)}:(n[c]=y,n)},{}),pe=(t,s,n)=>{const c=t.find(({to:b})=>b.includes(s));if(!c)return"/";const{to:v,search:y}=c,L=(0,Z.parse)(y),W=(0,Z.parse)(n.substring(1)),I=ce(L,W);return`${v}?${(0,Z.stringify)(I,{encode:!1})}`},a=t=>{const[{rawQuery:s}]=(0,h.useQueryParams)(),n=(0,l.v9)(H);return pe(n,t,s)};var i=e(16550);const O=()=>{const{search:t}=(0,i.TH)(),s=t?(0,Z.parse)(t.substring(1)):{};return s.plugins?(0,Z.stringify)({plugins:s.plugins},{encode:!1}):""};var S=e(80015);const N=(t,s,n)=>({type:S.m,permissions:t,__meta__:{plugins:s,containerName:n}}),C=()=>({type:S.Q}),A=t=>t["content-manager_rbacManager"].permissions,R=t=>t.rbacProvider.collectionTypesRelatedPermissions,$=(t,s,n="listView")=>{const c=(0,l.v9)(R),v=(0,l.v9)(A),y=(0,l.I0)(),L=c[s];return(0,o.useEffect)(()=>L?(y(N(L,t?t.plugins:null,n)),()=>{y(C())}):()=>{},[L,y,t,n]),v};var ue=e(99781);const G=()=>useContext(WysiwygContext),se=null,fe=t=>{const s=(0,o.useRef)();return(0,o.useEffect)(()=>{s.current=t},[t]),s.current};var Te=e(15699),Ee=e(40703)},15699:(U,f,e)=>{e.d(f,{Y:()=>T});var o=e(67294),l=e(99168),u=e.n(l),D=e(40703);const T=(E,{type:h="STRAPI_DND",index:d,item:g={},onStart:r,onEnd:m,onGrabItem:M,onDropItem:k,onCancel:x,onMoveItem:P,dropSensitivity:J="regular"})=>{const Q=(0,o.useRef)(null),[{handlerId:z},q]=(0,l.useDrop)({accept:h,collect(K){return{handlerId:K.getHandlerId()}},hover(K,re){if(!Q.current)return;const Y=K.index,j=d;if(Y!==j){if(J==="regular"){const ne=Q.current.getBoundingClientRect(),X=(ne.bottom-ne.top)/2,H=re.getClientOffset().y-ne.top;if(Y<j&&H<X||Y>j&&H>X)return}P(j,Y),K.index=j}}}),[{isDragging:ae},ee,_]=(0,l.useDrag)({type:h,item(){r&&r();const{width:K}=Q.current?.getBoundingClientRect()??{};return{index:d,width:K,...g}},end(){m&&m()},canDrag:E,isDragging:g.id?K=>g.id===K.getItem().id:void 0,collect:K=>({isDragging:K.isDragging()})}),te=(0,D.A)(E,d,{onGrabItem:M,onDropItem:k,onCancel:x,onMoveItem:P});return[{handlerId:z,isDragging:ae,handleKeyDown:te},Q,q,ee,_]}},40703:(U,f,e)=>{e.d(f,{A:()=>l});var o=e(67294);const l=(u,D,{onCancel:T,onDropItem:E,onGrabItem:h,onMoveItem:d})=>{const[g,r]=(0,o.useState)(!1),m=P=>{g&&(P==="UP"?d(D-1,D):P==="DOWN"&&d(D+1,D))},M=()=>{g?(E&&E(D),r(!1)):(h&&h(D),r(!0))},k=()=>{g&&(r(!1),T&&T(D))};return P=>{if(u&&!(P.key==="Tab"&&!g))switch(P.preventDefault(),P.key){case" ":case"Enter":M();break;case"Escape":k();break;case"ArrowDown":case"ArrowRight":m("DOWN");break;case"ArrowUp":case"ArrowLeft":m("UP");break;default:}}}},84668:(U,f,e)=>{e.d(f,{Jg:()=>d,KQ:()=>E,Vo:()=>h,Yg:()=>u});var o=e(20573),l=e(14506);const u=()=>r=>r["content-manager_app"]||l.E,D=()=>createSelector(u(),r=>r),T=()=>createSelector(u(),r=>r.models),E=()=>(0,o.P1)(u(),r=>({collectionTypeLinks:r.collectionTypeLinks,singleTypeLinks:r.singleTypeLinks})),h=()=>(0,o.P1)(u(),({components:r,models:m})=>({schemas:[...r,...m]})),d=(0,o.P1)(u(),r=>r.fieldSizes);var g=null},21323:(U,f,e)=>{e.d(f,{Z:()=>l});const l=u=>u["content-manager_editViewLayoutManager"].currentLayout},56723:(U,f,e)=>{e.d(f,{Z:()=>o});const o={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},69881:(U,f,e)=>{e.d(f,{Z:()=>l});const l=u=>`content-manager.${u}`},47815:(U,f,e)=>{e.d(f,{_Q:()=>H.Z,W3:()=>D,ko:()=>d,FE:()=>r,Di:()=>x,du:()=>z,TA:()=>ee,Ts:()=>re,Uo:()=>j,IF:()=>X,OB:()=>de.Z,w8:()=>ce,kc:()=>ge});var o=e(50361),l=e.n(o);const D=(a,i,p)=>{if(Array.isArray(a)&&i>=0&&p>=0&&i<=a.length-1&&p<=a.length-1){const O=l()(a),S=O.splice(i,1);return O.splice(p,0,S[0]),O}return a};var T=e(7334),E=e.n(T);const d=a=>{const i=a.type;return i==="relation"?!E()(a.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(i)&&!!i},g=(a,i)=>{typeof a=="function"?a(i):a!=null&&(a.current=i)},r=(...a)=>i=>a.forEach(p=>g(p,i));var m=e(27361),M=e.n(m);const k=(a,i)=>Object.keys(a).reduce((p,O)=>{const S=M()(a,[O],{}),{default:N,component:C,type:A,required:R,min:F,repeatable:$}=S;if(N!==void 0&&(p[O]=N),A==="component"){const ue=i?.[C]?.attributes??{},G=k(ue,i);if(R===!0&&(p[O]=$===!0?[]:G),F&&$===!0&&R){p[O]=[];for(let se=0;se<F;se+=1)p[O].push(G)}}return A==="dynamiczone"&&R===!0&&(p[O]=[]),p},{}),x=k;var P=e(57557),J=e.n(P);const z=({layouts:a,metadatas:i,...p})=>{const O=a.list.map(C=>C.name?C.name:C),S=Object.keys(i).reduce((C,A)=>{const R=M()(i,[A],{});let F=R.edit;return F.mainField&&(F={...F,mainField:R.edit.mainField.name}),{...C,[A]:{edit:F,list:J()(R.list,["mainField"])}}},{}),N=a.edit.map(C=>C.map(({name:A,size:R})=>({name:A,size:R})));return{...p,layouts:{edit:N,list:O},metadatas:S}},q=(a,i)=>a.map(p=>({...p,subject:i})),ee=a=>{const i={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(i).reduce((p,O)=>(p[O]=q(i[O],a),p),{})};var _=e(7654),te=e.n(_);const re=a=>a.split(".").filter(i=>te()(parseInt(i,10))),j=a=>{if(a.length===0)return-1;const i=Math.max.apply(Math,a.map(p=>p.__temp_key__??0));return Number.isNaN(i)?-1:i},X=a=>`/content-manager/${a}`;var de=e(69881),H=e(56723),Z=e(36968),le=e.n(Z);const ce=(a,i,p)=>{const O=A=>i.find(R=>R.uid===A),S=Object.assign({},a),N=a[p].uid,C=O(N);return le()(S,[p],{...a[p],...C}),Object.keys(a.components).forEach(A=>{const R=O(A);le()(S,["components",A],{...a.components[A],...R})}),S};var ie=e(79946);const ge=(a,i,p)=>{const O=(S,N)=>Object.keys(S).reduce((C,A)=>{const R=(0,ie.getType)(N,A),F=M()(S,A),$=(0,ie.getOtherInfos)(N,[A,"component"]),ue=(0,ie.getOtherInfos)(N,[A,"repeatable"]);return R==="dynamiczone"?(C[A]=F.map(G=>O(G,p[G.__component])),C):R==="component"?(ue?C[A]=F&&F.map(G=>O(G,p[$])):C[A]=F&&O(F,p[$]),C):(R!=="password"&&(C[A]=F),C)},{});return O(a,i)}},75194:(U,f,e)=>{e.d(f,{K:()=>d});var o=e(67294),l=e(45697),u=e.n(l),D=e(5079),T=e(75878),E=e(77270),h=e(13037);function d({children:g,...r}){const{color:m}=r.data,{themeColorName:M}=(0,h.k)(m);return o.createElement(D.c.Option,{...r},o.createElement(T.k,{alignItems:"center",gap:2},o.createElement(T.k,{height:2,background:m,borderColor:M==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),o.createElement(E.Z,{textColor:"neutral800",ellipsis:!0},g)))}d.propTypes={children:u().node.isRequired,data:u().shape({color:u().string}).isRequired}},54878:(U,f,e)=>{e.d(f,{R:()=>d});var o=e(67294),l=e(45697),u=e.n(l),D=e(5079),T=e(75878),E=e(77270),h=e(13037);function d({children:g,...r}){const{color:m}=r.data,{themeColorName:M}=m?(0,h.k)(m):{};return o.createElement(D.c.SingleValue,{...r},o.createElement(T.k,{alignItems:"center",gap:2},o.createElement(T.k,{height:2,background:m,borderColor:M==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),o.createElement(E.Z,{textColor:"neutral800",ellipsis:!0},g)))}d.defaultProps={children:null},d.propTypes={children:u().node,data:u().shape({color:u().string}).isRequired}},53616:(U,f,e)=>{e.d(f,{$k:()=>h,FT:()=>g,Nj:()=>E,Ot:()=>T,QM:()=>u,lv:()=>d,sN:()=>l,uL:()=>r,x4:()=>D});var o=e(20468);const l="settings_review-workflows",u="Settings/Review_Workflows/SET_WORKFLOWS",D="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",T="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",E="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",h="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",d={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},g=o.W.colors.primary600,r={STAGE:"stage"}},53752:(U,f,e)=>{e.d(f,{n:()=>T});var o=e(88767),l=e(79946);const u="review-workflows",D="/admin/review-workflows";function T(E){const{get:h}=(0,l.useFetchClient)(),d=(0,o.useQueryClient)(),g=[u,E??"default"];async function r({params:k={populate:"stages"}}){try{const{data:{data:x}}=await h(`${D}/workflows/${E??""}`,{params:k});return x}catch{return null}}async function m(){await d.refetchQueries(g)}return{workflows:(0,o.useQuery)(g,r),refetchWorkflow:m}}},13037:(U,f,e)=>{e.d(f,{k:()=>u,s:()=>D});var o=e(20468),l=e(53616);function u(T){if(!T)return null;const h=Object.entries(o.W.colors).filter(([,d])=>d.toUpperCase()===T.toUpperCase()).reduce((d,[g])=>(l.lv?.[g]&&(d=g),d),null);return h?{themeColorName:h,name:l.lv[h]}:null}function D(){return Object.entries(l.lv).map(([T,E])=>({hex:o.W.colors[T].toUpperCase(),name:E}))}}}]);
